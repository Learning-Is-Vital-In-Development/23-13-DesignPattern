# 2.ì˜µì €ë²„ íŒ¨í„´

### ì˜µì €ë²„ íŒ¨í„´

í•œ ê°ì²´ì˜ ìƒíƒœê°€ ë°”ë€Œë©´ ê·¸ ê°ì²´ì— ì˜ì¡´í•˜ëŠ” ë‹¤ë¥¸ ê°ì²´ì— ì—°ë½ì´ ê°€ê³  ë‚´ìš©ì´ ê°±ì‹ ë˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì¼ëŒ€ë‹¤ ì˜ì¡´ì„±ì„ ì •ì˜í•œë‹¤.

![image](https://github.com/Learning-Is-Vital-In-Development/23-13-DesignPattern/assets/96187152/e9e4e3ab-16d7-4b09-88cf-a5c5c62cf6e2)

ì˜µì €ë²„ íŒ¨í„´ì€ ì£¼ì œ ì¸í„°í˜ì´ìŠ¤ì™€ ì˜µì €ë²„ ì¸í„°í˜ì´ìŠ¤ê°€ ë“¤ì–´ìˆëŠ” í´ë˜ìŠ¤ ë””ìì¸ìœ¼ë¡œ êµ¬í˜„í•œë‹¤.

### ì˜µì €ë²„ íŒ¨í„´ì˜ êµ¬ì¡°

![image](https://github.com/Learning-Is-Vital-In-Development/23-13-DesignPattern/assets/96187152/72a069f2-1499-49e1-988f-61b4e9be415c)

- Subject : ì£¼ì œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œ ê°ì²´ì—ì„œ ì˜µì €ë²„ë¡œ ë“±ë¡í•˜ê±°ë‚˜ ì˜µì €ë²„ ëª©ë¡ì—ì„œ íƒˆí‡´í•˜ê³  ì‹¶ì„ ë•Œ ì´ ì¸í„°í˜ì´ìŠ¤ì— ìˆëŠ” ë©”ì„œë“œë¥¼ í™œìš©í•©ë‹ˆë‹¤.
- Observer : ì˜µì €ë²„ê°€ ë  ê°€ëŠ¥ì„±ì´ ìˆëŠ” ê°ì²´ëŠ” ë°˜ë“œì‹œ Observerì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì¸í„°í˜ì´ìŠ¤ì—ëŠ” ì£¼ì œì˜ ìƒíƒœê°€ ë°”ë€Œì—ˆì„ë•Œ í˜¸ì¶œë˜ëŠ”  update() ë©”ì†Œë“œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.
- ConcreteObserver : Observer ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê¸°ë§Œ í•˜ë©´ ë¬´ì—‡ì´ë“  ì˜µì €ë²„ í´ë˜ìŠ¤ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° ì˜µì €ë²„ëŠ” íŠ¹ì • ì£¼ì œì— ë“±ë¡í•´ì„œ ì—°ë½ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ConcreteSubject : ì£¼ì œ ì—­í• ì„ í•˜ëŠ” í´ë˜ìŠ¤ëŠ” í•­ìƒ Subject ì¸í„°ì„¸ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. ì£¼ì œ í´ë˜ìŠ¤ì—ëŠ” ë“±ë¡/í•´ì§€ìš© ë©”ì†Œë“œì™€ ìƒíƒœê°€ ë°”ë€” ë•Œë§ˆë‹¤ ëª¨ë“  ì˜µì €ë²„í•œí…Œ ì—°ë½í•˜ëŠ” notifyObservers() ë©”ì†Œë“œë„ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.

---

### ğŸŒŸ ëŠìŠ¨í•œ ê²°í•©ì˜ ìœ„ë ¥

ê°ì²´ë“¤ì´ ìƒí˜¸ì‘ìš©ì„ í•  ìˆ˜ ìˆìœ¼ë‚˜ ì„œë¡œ ì˜ ëª¨ë¥´ëŠ” ê´€ê³„ë¥¼ ì˜ë¯¸í•œë‹¤.

**ì˜µì €ë²„ íŒ¨í„´ì—ì„œ ëŠìŠ¨í•œ ê²°í•©ì„ ë§Œë“œëŠ” ë°©ë²•**

- ì£¼ì œëŠ” ì˜µì €ë²„ê°€ íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤ëŠ” ì‚¬ì‹¤ë§Œ ì•Œê³  ìˆìŒ
- ì˜µì €ë²„ëŠ” ì–¸ì œë“ ì§€ ìƒˆë¡œ ì¶”ê°€ ê°€ëŠ¥í•¨
- ìƒˆë¡œìš´ í˜•ì‹ì˜ ì˜µì €ë²„ë¥¼ ì¶”ê°€í•  ë•Œë„ ì£¼ì œë¥¼ ë³€ê²½í•  í•„ìš”ê°€ ì—†ìŒ
- ì£¼ì œì™€ ì˜µì €ë²„ëŠ” ì„œë¡œ ë…ë¦½ì ì´ê³  ì¬ì‚¬ìš© ê°€ëŠ¥
- ì£¼ì œë‚˜ ì˜µì €ë²„ê°€ ë‹¬ë¼ì ¸ë„ ì„œë¡œ ì˜í–¥ì„ ì£¼ì§€ëŠ” ì•ŠëŠ”ë‹¤

---

### ê¸°ìƒ ìŠ¤í…Œì´ì…˜ êµ¬í˜„í•˜ê¸°

Subject Interface

```java
public interface Subject {
    void registerObserver(Observer o); //ì˜µì €ë²„ ë“±ë¡
    void removeObserver(Observer o); //ì˜µì €ë²„ ì‚­ì œ
    void notifyObserver(); //ì£¼ì œì™€ ìƒíƒœ ë³€ê²½ì‹œ ëª¨ë“  ì˜µì €ë²„ì—ê²Œ ë³€ê²½ ë‚´ìš© ì „ë‹¬
}
```

Observer Interface

```java
public interface Observer {
    void update(float temp, float humidity, float preesure);
    //ê¸°ìƒ ì •ë³´ ë³€ê²½ì‹œ ì˜µì €ë²„ì— ì „ë‹¬ë˜ëŠ” ìƒíƒœê°’ë“¤
}
```

DisplayElement Interface

```java
public interface DisplayElement {
    void display();
}
```

WeatherData class

```java
public class WeatherData implements Subject{
    private List<Observer> observers;
    private float temperature;
    private float humidity;
    private float pressure;

    public WeatherData() {
        observers = new ArrayList<>();
    }

    @Override
    public void registerObserver(Observer o) {
        observers.add(o);
    }

    @Override
    public void removeObserver(Observer o) {
        observers.remove(o);
    }

    @Override
    public void notifyObserver() {
        for(Observer o : observers) {
            o.update(temperature, humidity, pressure);
        }
    }

    public void measurementsChanged() {
        notifyObserver();
    }

    public void setMeasurements() {
        this.temperature = (float) ((Math.random() * 99) + 1);
        this.humidity = (float) ((Math.random() * 99) + 1);
        this.pressure = (float) ((Math.random() * 99) + 1);
        measurementsChanged();
    }
}
```

CurrentConditionDisplay class

```java
public class CurrentConditionsDisplay implements Observer, DisplayElement{
    private float temperature;
    private float humidity;
    private float pressure;
    private WeatherData weatherData;

    public CurrentConditionsDisplay(WeatherData weatherData) {
        this.weatherData = weatherData;
        weatherData.registerObserver(this);
    }

    @Override
    public void display() {
        System.out.println("í˜„ì¬ ìƒíƒœ ì˜¨ë„ : " + temperature + " F,ìŠµë„ : " + humidity + " pressure : " + pressure);
    }

    @Override
    public void update(float temp, float humidity, float pressure) {
        this.temperature = temp;
        this.humidity = humidity;
        this.pressure = pressure;
        display();
    }
}
```

í…ŒìŠ¤íŠ¸

```java
public class WeatherStation {
    public static void main(String[] args) {
        WeatherData weatherData = new WeatherData();

        CurrentConditionsDisplay currentConditionsDisplay =
                new CurrentConditionsDisplay(weatherData);

        weatherData.setMeasurements();
    }
}
```

ê²°ê³¼

```java
í˜„ì¬ ìƒíƒœ ì˜¨ë„ : 80.79424 F,ìŠµë„ : 52.64673 pressure : 72.16922
```

### í’€ ë°©ì‹ìœ¼ë¡œ ì½”ë“œ ë³€ê²½

ì˜µì €ë²„ê°€ í•„ìš”í•  ë•Œë§ˆë‹¤ ì£¼ì œë¡œë¶€í„° ë°ì´í„°ë¥¼ ë‹¹ê²¨ì˜¤ëŠ” ë°©ì‹

WeatherDataì˜ notifyObserver() ìˆ˜ì •

```java
@Override
    public void notifyObserver() {
        for(Observer o : observers) {
            o.update();
        }
    }
```

Observer ì¸í„°í˜ì´ìŠ¤ update() ìˆ˜ì •

```java
public interface Observer {
    void update();
    //ê¸°ìƒ ì •ë³´ ë³€ê²½ì‹œ ì˜µì €ë²„ì— ì „ë‹¬ë˜ëŠ” ìƒíƒœê°’ë“¤
}
```

WeatherDataì— getter ë©”ì„œë“œ ì¶”ê°€

```java
public float getTemperature() {
        return temperature;
    }

    public float getHumidity() {
        return humidity;
    }

    public float getPressure() {
        return pressure;
    }
```

CurrentConditionDisplay update() ìˆ˜ì •

```java
@Override
public void update() {
    this.temperature = weatherData.getTemperature();
    this.humidity = weatherData.getHumidity();
    this.pressure = weatherData.getPressure();
    display();
}
```